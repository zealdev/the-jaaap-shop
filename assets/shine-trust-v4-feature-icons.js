!function(t){"use strict";const e=setInterval((()=>{window.ST_GLOBALS&&(clearInterval(e),n().then((()=>console.info("ST Feature Icon loaded"))))}));class i{constructor(e){this.editor=e,this.divEl=t.createElement("div")}render(){const{id:t,position:e,html:i,css:o,editor:n}=this.editor;return this.divEl.classList.add("st-feature-wrapper"),this.divEl.classList.add(`st-feature-${t}`),this.divEl.innerHTML=i,Object.keys(n?.mapping).map((t=>{this.divEl.querySelector(t).innerText=window.ST_GLOBALS.translate(n?.mapping[t])})),{id:t,position:e,html:i,css:o,editor:n,titleFontFamily:{fontFamily:this.editor?.editor?.titleFontFamily?.fontFamily,fontWeight:this.editor?.editor?.titleFontFamily?.fontWeight},subFontFamily:{fontFamily:this.editor?.editor?.subFontFamily?.fontFamily,fontWeight:this.editor?.editor?.subFontFamily?.fontWeight},filters:window.ST_GLOBALS.convertFilters(this.editor?.position?.productFilters,this.editor?.position?.products),divEl:this.divEl}}}const o={},n=async function(){if(!window.ST_PLAN||"ACTIVE"!==window.ST_PLAN?.status||"Advanced"!==window.ST_PLAN?.name)return;const t=window.ST_FEATURE_ICONS||[];if(0===t.length)return;const e=[];let n="";t.map((t=>{const{status:l=!1}=t;if(l){const l=new i(t).render();o[l.id]=l;const s=l.titleFontFamily,r=l.subFontFamily;if("object"==typeof s&&s?.fontFamily){0===e.filter((t=>t.fontFamily===s.fontFamily&&parseInt(t.fontWeight)===parseInt(s.fontWeight))).length&&e.push(s)}if("object"==typeof r&&r?.fontFamily){0===e.filter((t=>t.fontFamily===r.fontFamily&&parseInt(t.fontWeight)===parseInt(r.fontWeight))).length&&e.push(r)}const c=l.css;n+=c}})),e.length&&e.map((t=>{window.ST_LOADED_FONTS.includes(t.fontFamily)||window.ST_GLOBALS.loadFont(t)})),window.ST_GLOBALS.addStyle(n),l()},l=async function(){let e=window.ST_GLOBALS.pageType;for(const i in o){const n=o[i],{position:l,id:r,filters:c,divEl:a}=n;if("block"===l.page){let e=t.querySelectorAll(".shine-feature-icon:not(.shine-show)");for(let t=0;t<e.length;t++){if((e[t].getAttribute("data-id")||"")===r){let i=a.cloneNode(!0);e[t].appendChild(i),e[t].classList.add("shine-show");const o=e[t].querySelector(".st-editor-preview");o&&(o.style.display="none")}}}else if("custom"===l.page&&""!==l.selector.cssSelector){let e=l.selector.cssSelector.split(",");const i=l?.selector?.cssPosition?l?.selector?.cssPosition:"below";for(let o=0;o<e.length;o++)setInterval((async()=>{let n=t.querySelector(e[o]);if(n&&!n.classList.contains("st-feature-icon-"+r)){const t=n.parentNode.querySelectorAll(".st-feature-"+r);for(let e=0;e<t.length;e++)t[e].remove();let e=a.cloneNode(!0);"above"===i?n.parentNode.insertBefore(e,n):n.parentNode.insertBefore(e,n.nextSibling),n.classList.add("st-feature-icon-"+r)}}),500)}else if(e===l.page){let e=t.getElementsByTagName("html")[0].getAttribute("lang"),i="";if("product"===l.page){i=`form[action*="/cart/add"]:not(.installment), form[action="/${e}/cart/add"]:not(.installment)`,""!==l.selector.cssSelector&&(i=l.selector.cssSelector);try{const t=window.ST_GLOBALS.product;let{inventory:e,collections:o,tags:n,title:r,id:d,available:f,price:p,price_min:y,price_max:h,compare_at_price:u,vendor:g,type:m}=t;if(p=window.ST_GLOBALS.fixPrice(p),y=window.ST_GLOBALS.fixPrice(y),h=window.ST_GLOBALS.fixPrice(h),u=window.ST_GLOBALS.fixPrice(u),c.products.size)c.products.has(d)&&s(l.page,i,a);else if(0===Object.keys(c.filters).length&&null===c.collection)s(l.page,i,a);else if(c.select_all&&c.collection&&o.includes(c.collection))s(l.page,i,a);else if(Object.keys(c.filters).length){let t=0,o=Object.keys(c.filters).length;for(const i in c.filters)"_s"===i&&r.includes(c.filters[i])&&(t+=1),"price"===i&&!isNaN(y)&&!isNaN(h)&&y>=c.filters[i].min&&h<=c.filters[i].max&&(t+=1),"tag"===i&&n.includes(`${c.filters.tag}`)&&(t+=1),"vendor"===i&&g===c.filters.vendor&&(t+=1),"type"===i&&m===c.filters.type&&(t+=1),"inventory"===i&&("instock"===c.filters.inventory.type&&f&&(t+=1),"outstock"!==c.filters.inventory.type||f||(t+=1),"less-than"===c.filters.inventory.type&&f&&!isNaN(e)&&e<=c.filters.inventory.lte&&(t+=1),"great-than"===c.filters.inventory.type&&f&&!isNaN(e)&&e>=c.filters.inventory.gte&&(t+=1));t===o&&s(l.page,i,a)}}catch(t){console.log(t)}}else"cart"===l.page&&(i='button[name="checkout"]',""!==l.selector.cssSelector&&(i=l.selector.cssSelector),s(l.page,i,a))}}},s=function(e,i,o){if(""!==i){let l=t.querySelectorAll(i);if("cart"===e&&(l.length||(l=t.querySelectorAll(`form[action="/cart"], form[action="/${lang}/cart"]`)),l.length||(l=t.querySelectorAll(`form[action="/checkout"], form[action="/${lang}/checkout"]`))),l.length)for(var n=0;n<l.length;n++){"cart"===e&&(l[n].parentNode.style.flexWrap="wrap");let t=o.cloneNode(!0);l[n].parentNode.insertBefore(t,l[n].nextSibling)}}}}(window.document);