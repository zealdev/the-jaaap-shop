"use strict";const STCountdown=function(){};STCountdown.timer=function(e,t,n,o){let i=t-e;const l=864e5,s=36e5,c=6e4,r=1e3,a=function(){if(i>0){let e=i,t=Math.floor(e/l);e%=l;let o=Math.floor(e/s);e%=s;let a=Math.floor(e/c);e%=c;let d=Math.floor(e/r);n({days:t,hours:o,minutes:a,seconds:d}),i-=1e3}else i-=1e3,clearInterval(d),o()},d=setInterval((u=this,function(){a.call(u)}),1e3);var u;return a.call(this),{abort:function(){clearInterval(d)},getTimeRemaining:function(){let e=i;const t=Math.floor(e/l);e%=l;const n=Math.floor(e/s);e%=s;const o=Math.floor(e/c);e%=c;return{days:t,hours:n,minutes:o,seconds:Math.floor(e/r)}}}},function(e){const t=setInterval((()=>{window.ST_GLOBALS&&(clearInterval(t),c().then((()=>console.info("ST Countdown loaded"))))}));class n{constructor(t){this.countdown=t;const{id:n,htmlRender:o}=t;this.countdownEl=e.createElement("div"),this.countdownEl.classList.add(`st-countdown-wrapper-${n}`),this.countdownEl.innerHTML=o}render(){const{productFilters:e,selectedProducts:t}=this.countdown;return{countdownEl:this.countdownEl,countdownData:this.countdown,filters:window.ST_GLOBALS.convertFilters(e,t)}}}let o=null;const i=["absolute","fixed","sticky"],l={default:null,custom:null},s={},c=async function(){if(!window.ST_PLAN||"Advanced"!==window.ST_PLAN?.name||"ACTIVE"!==window.ST_PLAN?.status)return;o=window.ST_GLOBALS.getBaseCDN();const t=window.ST_COUNTDOWNS||[];if(0===t.length)return;const i=window.ST_GLOBALS.pageType||"index",c=[];let a="";if(t.map((e=>{const{id:t,status:o,editorData:l,htmlRender:r,cssRender:d,startTime:u,endTime:p}=e,{countdownType:w,visibleSetting:S,displayPosition:m,pageFilter:T,pageShow:g,collections:y=[],fontFamily:L,titleFontWeight:_,subTitleFontWeight:A,numberFontWeight:b}=l;if(o){let o=!1;const l=window.ST_GLOBALS.dateWithTimeZone(new Date,window.ST_META_DATA.timeZone);if("right_now"===w||"definite_time"===w){const e=window.ST_GLOBALS.dateWithTimeZone(p,window.ST_META_DATA.timeZone);if("right_now"===w&&e.getTime()>l.getTime()&&(o=!0),"definite_time"===w){const t=window.ST_GLOBALS.dateWithTimeZone(u,window.ST_META_DATA.timeZone);e.getTime()>t.getTime()&&e.getTime()>l.getTime()&&t.getTime()<l.getTime()&&(o=!0)}}if("fixed_time"===w&&(o=!0),o){let o=!1;"product-image"!==m&&"product-title"!==m||!f(i,S)||(o=!0),"top-bar"===m&&h(i,T,g,y)&&(o=!0),("other-pages"===m||"product-page"===m&&"product"===window.ST_GLOBALS.pageType)&&(o=!0),o&&(s[t]=new n(e).render(),a+=d,L?.fontFamily&&(c.hasOwnProperty(L.fontFamily)?c[L.fontFamily]={...c[L.fontFamily],titleFontWeight:_,subTitleFontWeight:A,numberFontWeight:b}:c[L.fontFamily]={titleFontWeight:_,subTitleFontWeight:A,numberFontWeight:b}))}}})),Object.keys(c).length){const e=Object.keys(c).map((e=>({fontFamily:e,fontWeight:[...new Set([parseInt(c[e].titleFontWeight),parseInt(c[e].numberFontWeight),parseInt(c[e].subTitleFontWeight),parseInt(c[e].labelFontWeight)])].filter((e=>!isNaN(e)&&e>0)).sort((function(e,t){return e-t})).join(";")})));e.length&&e.map((e=>{window.ST_LOADED_FONTS.includes(e.fontFamily)||window.ST_GLOBALS.loadFont(e)}))}a&&window.ST_GLOBALS.addStyle(a),l.default=m(),l.custom=S(),r().then((()=>!0)),setInterval((()=>{r()}),500);for(const t in s){const{countdownEl:n,countdownData:o}=s[t],{countdownID:i,editorData:{displayPosition:l,displayProductPage:c,cssSelector:r}}=o;if("top-bar"===l){e.body.insertAdjacentElement("afterbegin",n),d(n,o);const l=n.querySelector(`[id="st-countdown-${i}"]`);null!==l&&(l.style.zIndex=25-t);const s=l.querySelector(".countdown-close");s&&s.addEventListener("click",(function(e){window.ST_GLOBALS.closeBar(e,".st-countdown-bar")}));const c=l.querySelector(".st-coupon-code");c&&c.addEventListener("click",(function(e){window.ST_GLOBALS.copy(e)})),window.ST_GLOBALS.changeBodyStyle(".st-countdown-bar.countdown-topbar",window.ST_GLOBALS.cssFixed,window.ST_META_DATA?.effectElementTopBar)}else if("product-page"===l&&"product"===window.ST_GLOBALS.pageType)try{const{filters:i}=s[t],l=window.ST_GLOBALS.product||null;if(l){let{published_at:t,on_sale:s,inventory:a,collections:u,tags:p,title:w,id:f,available:h,price:S,price_min:m,price_max:T,compare_at_price:g,vendor:y,type:L}=l;S=window.ST_GLOBALS.fixPrice(S),m=window.ST_GLOBALS.fixPrice(m),T=window.ST_GLOBALS.fixPrice(T),g=window.ST_GLOBALS.fixPrice(g);let _=!1;if(!i?.type&&i.select_all&&0===Object.keys(i.filters).length&&null===i.collection)_=!0;else if(i.select_all&&i.collection&&u.includes(i.collection))_=!0;else if(!i.select_all&&i.products.size)i.products.has(f)&&(_=!0);else if(i.select_all&&Object.keys(i.filters).length){let e=0,t=Object.keys(i.filters).length;for(const t in i.filters)"_s"===t&&w.includes(i.filters[t])&&(e+=1),"price"===t&&!isNaN(m)&&!isNaN(T)&&m>=i.filters[t].min&&T<=i.filters[t].max&&(e+=1),"tag"===t&&p.includes(`${i.filters.tag}`)&&(e+=1),"vendor"===t&&y===i.filters.vendor&&(e+=1),"type"===t&&L===i.filters.type&&(e+=1),"inventory"===t&&("instock"===i.filters.inventory.type&&h&&(e+=1),"outstock"!==i.filters.inventory.type||h||(e+=1),"less-than"===i.filters.inventory.type&&h&&!isNaN(a)&&a<=i.filters.inventory.lte&&(e+=1),"great-than"===i.filters.inventory.type&&h&&!isNaN(a)&&a>=i.filters.inventory.gte&&(e+=1));e===t&&(_=!0)}else if(i.type)if("new-arrival"===i.type){const e=window.ST_GLOBALS.dateWithTimeZone(t,window.ST_META_DATA.timeZone),n=window.ST_GLOBALS.dateWithTimeZone(i.date,window.ST_META_DATA.timeZone);e.getTime()>=n.getTime()&&(_=!0)}else"on-sale"===i.type&&s||"low-stock"===i.type&&a>0&&a<=i.quantity?_=!0:"out-stock"!==i.type||h||(_=!0);if(_){if("above_cart_button"===c){const t=`form[action*="/cart/add"]:not(.installment), form[action="/${window.ST_GLOBALS.currentLanguage}/cart/add"]:not(.installment)`,i=e.querySelectorAll(t);if(i.length)for(let e=0;e<i.length;e++){const t=i[e].parentNode,l=n.cloneNode(!0);t.insertBefore(l,i[e]),d(l,o)}}if("custom"===c&&r?.cssSelector){const t=e.querySelectorAll(r.cssSelector);if(null!==t)for(let e=0;e<t.length;e++){const i=t[e].parentNode,l=n.cloneNode(!0);"above"===r?.cssPosition&&i.insertBefore(l,t[e]),"below"===r?.cssPosition&&i.insertBefore(l,t[e].nextSibling),d(l,o)}}}}}catch(e){console.log(e)}else if("other-pages"===l){const t=e.querySelectorAll(".st-countdown-block-wrapper");for(let e=0;e<t.length;e++){const i=t[e],l=i.getAttribute("data-countdown-id");if(!i.classList.contains(`countdown-item-${l}`)){const e=n.cloneNode(!0);i.appendChild(e),d(e,o);const t=i.querySelector(".st-editor-preview");t&&(t.style.display="none"),i.classList.add(`countdown-item-${l}`)}}}}},r=async function(){const t=T();let n=[];const o={};for(let e=0;e<t.length;e++){const i=t[e],l=i.getAttribute("href")||i.getAttribute("data-href"),s=g(l);o.hasOwnProperty(s)?o[s].push(i):o[s]=[i],n.push(s),i.classList.add("stCountdownLoaded")}if("product"===window.ST_GLOBALS.pageType&&window.ST_GLOBALS.productHandle&&!e.body.classList.contains("st-single-countdown-loaded")&&(o.hasOwnProperty(window.ST_GLOBALS.productHandle)?o[window.ST_GLOBALS.productHandle].push(null):o[window.ST_GLOBALS.productHandle]=[null],e.body.classList.add("st-single-countdown-loaded")),n=[...new Set(n)],n.length){let e="";const t=n.length;n.map(((n,o)=>{e+=`handle:"${n}"${o<t-1?" OR ":""}`}));const i=`${window.ST_GLOBALS.shopUrl}/search.js?q=${e}&view=shinetrust.product-handles`;try{const e=await fetch(i,{mode:"no-cors"}),t=await e.json();for(const e in s){const n=s[e],{filters:i,countdownData:l}=n,{editorData:{displayPosition:c}}=l;"product-image"!==c&&"product-title"!==c||t.map((e=>{let{handle:t,published_at:l,on_sale:s,inventory:c,collections:r,tags:d,title:u,id:p,featured_image:w,available:f,price_min:h,price_max:S,vendor:m,type:T}=e;if(h=window.ST_GLOBALS.fixPrice(h),S=window.ST_GLOBALS.fixPrice(S),o.hasOwnProperty(t))if(!i?.type&&i.select_all&&0===Object.keys(i.filters).length&&null===i.collection)a(o[t],n,u,w);else if(i.select_all&&i.collection&&r.includes(i.collection))a(o[t],n,u,w);else if(!i.select_all&&i.products.size)i.products.has(p)&&a(o[t],n,u,w);else if(i.select_all&&Object.keys(i.filters).length){let e=0,l=Object.keys(i.filters).length;for(const t in i.filters)"_s"===t&&u.includes(i.filters[t])&&(e+=1),"price"===t&&!isNaN(h)&&!isNaN(S)&&h>=i.filters[t].min&&S<=i.filters[t].max&&(e+=1),"tag"===t&&d.includes(`${i.filters.tag}`)&&(e+=1),"vendor"===t&&m===i.filters.vendor&&(e+=1),"type"===t&&T===i.filters.type&&(e+=1),"inventory"===t&&("instock"===i.filters.inventory.type&&f&&(e+=1),"outstock"!==i.filters.inventory.type||f||(e+=1),"less-than"===i.filters.inventory.type&&f&&!isNaN(c)&&c<=i.filters.inventory.lte&&(e+=1),"great-than"===i.filters.inventory.type&&f&&!isNaN(c)&&c>=i.filters.inventory.gte&&(e+=1));e===l&&a(o[t],n,u,w)}else if(i.type)if("new-arrival"===i.type){const e=window.ST_GLOBALS.dateWithTimeZone(l,window.ST_META_DATA.timeZone),s=window.ST_GLOBALS.dateWithTimeZone(i.date,window.ST_META_DATA.timeZone);e.getTime()>=s.getTime()&&a(o[t],n,u,w)}else"on-sale"===i.type&&s||"low-stock"===i.type&&c>0&&c<=i.quantity?a(o[t],n,u,w):"out-stock"!==i.type||f||a(o[t],n,u,w)}))}}catch(e){console.log(e)}}},a=function(t,n,o,s){const{countdownEl:c,countdownData:r}=n,{id:a,editorData:u}=r,{displayPosition:w}=u;if(l.default){const n="product"===window.ST_GLOBALS.pageType;for(let o=0;o<t.length;o++){const s=t[o];if("product-image"===w){let t=[];l.default&&(t=l.default?.loop.thumbnail,n&&(t=[...t,...l.default?.single.thumbnail])),l.custom&&(t=l.custom?.loop.thumbnail,n&&(t=[...t,...l.custom?.single.thumbnail])),t.map((async t=>{const{parent:n,child:o,await:l=!1}=t;if(s&&n||!s&&!n){const t=s?s.closest(n):e.body;if(t&&!t.classList.contains(`countdown-item-${a}`)){let e=t.querySelectorAll(o);if(0===e.length&&l){let n=0;for(;n<=5;)e=t.querySelectorAll(o),0===e.length?(await new Promise((e=>setTimeout(e,300))),n++):n=6}for(let n=0;n<e.length;n++){const o=e[n],l=getComputedStyle(o);i.includes(l.position)||(o.style.position="relative");const s=c.cloneNode(!0);o.appendChild(s),d(s,r),s.classList.add("st-countdown-image"),t.classList.add(`countdown-item-${a}`)}}}}))}else if("product-title"===w){let t=[];l.default&&(t=l.default?.loop.title,n&&(t=[...t,...l.default?.single.title])),l.custom&&(t=l.custom?.loop.title,n&&(t=[...t,...l.custom?.single.title])),t.map((async t=>{const{parent:n,child:o,await:l=!1}=t;if(s&&n||!s&&!n){const t=s?s.closest(n):e.body;if(t&&!t.classList.contains(`countdown-item-${a}`)){let e=t.querySelectorAll(o);if(0===e.length&&l){let n=0;for(;n<=5;)e=t.querySelectorAll(o),0===e.length?(await new Promise((e=>setTimeout(e,300))),n++):n=6}for(let n=0;n<e.length;n++){const o=e[n],l=getComputedStyle(o);i.includes(l.position)||(o.style.position="relative");const s=c.cloneNode(!0),u=o.parentNode,p=o.nextSibling;null===p?u.appendChild(s):u.insertBefore(s,p),d(s,r),s.classList.add("st-countdown-title"),t.classList.add(`countdown-item-${a}`)}}}}))}}}else if("product-image"===w){if(!s)return;s=s.split("?")[0];const t=e.body.querySelectorAll('div[data-bg*="'+s+'"], div[data-bgset*="'+s+'"],img[src*="'+s+'"], img[srcset*="'+s+'"]');for(let e=0;e<t.length;e++){const n=t[e].parentElement;if(n&&!n.classList.contains(`countdown-item-${a}`)){const e=getComputedStyle(n);i.includes(e.position)||(n.style.position="relative");const t=c.cloneNode(!0);n.appendChild(t),d(t,r),t.classList.add("st-countdown-image"),n.classList.add(`countdown-item-${a}`)}}}else if("product-title"===w){const e=p(o);for(let t=0;t<e.length;t++){const n=e[t].parentNode;if(n&&!n.classList.contains(`countdown-item-${a}`)){const o=c.cloneNode(!0),i=e[t].nextSibling;null===i?n.appendChild(o):n.insertBefore(o,i),d(o,r),o.classList.add("st-countdown-title"),n.classList.add(`countdown-item-${a}`)}}}},d=function(e,t){const{editorData:n,startTime:o,endTime:i}=t,{messageText:l,messageSubText:s,buttonText:c}=n,r=e.querySelector(".countdown-text-inner"),a=e.querySelector(".countdown-sub-text-inner"),d=e.querySelector(".countdown-action");r&&l&&(r.innerHTML=window.ST_GLOBALS.translate(l)),a&&s&&(a.innerHTML=window.ST_GLOBALS.translate(s)),d&&c&&(d.innerHTML=window.ST_GLOBALS.translate(c));const{countdownType:p,fixedTime:w,whenCountdownEnds:f}=n,h=window.ST_GLOBALS.dateWithTimeZone(new Date,window.ST_META_DATA.timeZone);if("right_now"===p||"definite_time"===p){const t=window.ST_GLOBALS.dateWithTimeZone(i,window.ST_META_DATA.timeZone);if("right_now"===p&&u(e,n,h,t),"definite_time"===p){window.ST_GLOBALS.dateWithTimeZone(o,window.ST_META_DATA.timeZone).getTime()<t.getTime()&&u(e,n,h,t)}}if("fixed_time"===p){const t=parseInt(w),o=new Date(h.getTime()+6e4*t);u(e,n,h,o,t,f)}},u=function(e,t,n,o,i,l="nothing"){const s=e.querySelector(".countdown-day"),c=e.querySelector(".countdown-hour"),r=e.querySelector(".countdown-minute"),a=e.querySelector(".countdown-seconds"),d=String(t.dayLabel).split("||"),p=String(t.hourLabel).split("||"),f=String(t.minuteLabel).split("||"),h=String(t.secondsLabel).split("||");STCountdown.timer(n,o,(function(e){s.querySelector(".value").innerHTML=w(e.days),0===e.days||e.days>=2?s.querySelector(".unit").innerHTML=d[0]:s.querySelector(".unit").innerHTML=2===d.length?d[1]:d[0],c.querySelector(".value").innerHTML=w(e.hours),0===e.hours||e.hours>=2?c.querySelector(".unit").innerHTML=p[0]:c.querySelector(".unit").innerHTML=2===p.length?p[1]:p[0],r.querySelector(".value").innerHTML=w(e.minutes),0===e.minutes||e.minutes>=2?r.querySelector(".unit").innerHTML=f[0]:r.querySelector(".unit").innerHTML=2===f.length?f[1]:f[0],a.querySelector(".value").innerHTML=w(e.seconds),0===e.seconds||e.seconds>=2?a.querySelector(".unit").innerHTML=h[0]:a.querySelector(".unit").innerHTML=2===h.length?h[1]:h[0]}),(function(){if(s.querySelector(".value").innerHTML="00",c.querySelector(".value").innerHTML="00",r.querySelector(".value").innerHTML="00",a.querySelector(".value").innerHTML="00",a.querySelector(".unit").innerHTML=2===h.length?h[1]:h[0],"hide_bar"===l&&(e.style.display="none"),i&&"repeat"===l){const n=new Date(o.getTime()+6e4*i);u(e,t,o,n,i,l)}}))},p=function(t,n=null){const o=[],i=null===n?e:n;for(const e of i.querySelectorAll("div, h1, h2, h3, h4, h5, h6, h1 a, h2 a, h3 a, h4 a, h5 a, h6 a"))e.textContent.trim()===t&&0===e.children.length&&o.push(e);return o},w=function(e){return String(e).padStart(2,"0").split("").map(((e,t)=>`<span class="num-split num-${t}">${e}</span>`)).join("")},f=function(e,t){let n="";switch(t){case"collection_page":n="collection";break;case"product_page":n="product"}return"all"===t||n===e},h=function(e,t="include",n,o=[]){let i=!1,l="";switch(n){case"collection_page":l="collection";break;case"collection_list":l="list-collections";break;case"product_page":l="product";break;case"homepage":l="index";break;case"cart":l="cart"}if("include"===t)if("collection"===e&&"collection"===l){const e=`gid://shopify/Collection/${window.ST_GLOBALS.collectionID}`;(o.includes("selectall")||window.ST_GLOBALS.collectionID&&o.includes(e)||!window.ST_GLOBALS.collectionID&&o.includes("all"))&&(i=!0)}else"all"!==n&&e!==l||(i=!0);else if("exclude"===t)if("collection"===e&&"collection"===l){const e=`gid://shopify/Collection/${window.ST_GLOBALS.collectionID}`;o.includes("selectall")?window.ST_GLOBALS.collectionID&&!o.includes(e)?i=!0:window.ST_GLOBALS.collectionID||o.includes("all")||(i=!0):i=!0}else e!==l&&(i=!0);return i},S=function(){if(window.ST_META_DATA.customCompatibleTheme){const e=window.ST_META_DATA.customCompatibleTheme.replace(/[\n\r\t]+/g,"").trim().split(";;"),t={loop:{thumbnail:[],title:[],price:[]},single:{thumbnail:[],title:[],price:[]}};return e.map((e=>{if(""!==e){const n=e.split(":");if(2===n.length){n[1].split(",").map((e=>{const o=e.split("||"),i={parent:o[0],child:o[1],await:3===o.length};switch(n[0]){case"image":t.loop.thumbnail.push(i);break;case"title":t.loop.title.push(i);break;case"price":t.loop.price.push(i);break;case"imageSingle":t.single.thumbnail.push(i);break;case"titleSingle":t.single.title.push(i);break;case"priceSingle":t.single.price.push(i)}}))}}})),t}return null},m=function(){if(window.ST_META_DATA.compatibleData){const{selectors:{image:e,imageSingleProduct:t,detail:{title:n,price:o,titleSingleProduct:i,priceSingleProduct:l}}}=window.ST_META_DATA.compatibleData,s={loop:{thumbnail:[],title:[],price:[]},single:{thumbnail:[],title:[],price:[]}};return e.map((e=>{const t=e.split("||");s.loop.thumbnail.push({parent:t[0],child:t[1]})})),t.map((e=>{s.single.thumbnail.push({parent:null,child:e})})),n.map((e=>{const t=e.split("||");s.loop.title.push({parent:t[0],child:t[1]})})),i.map((e=>{s.single.title.push({parent:null,child:e})})),o.map((e=>{const t=e.split("||");s.loop.price.push({parent:t[0],child:t[1]})})),l.map((e=>{s.single.price.push({parent:null,child:e})})),s}return null},T=function(){return e.querySelectorAll('a[href*="/products/"]:not(.stCountdownLoaded),[data-href]:not(.stCountdownLoaded)')},g=function(e){const t=e.split("#")[0].split("?")[0].split("/products/");return decodeURIComponent(t[1])}}(document);